<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ramo de Gerberas Centrado</title>
<style>
  body { margin:0; overflow:hidden; background:black; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
  canvas { display:block; }
  #textContainer {
    position:absolute;
    top: 5%;
    width:100%;
    text-align:center;
    font-size: 2rem;
    font-weight: bold;
    color: #FFD700;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
    letter-spacing: 2px;
  }
</style>
</head>
<body>
<div id="textContainer"></div>
<canvas id="canvas"></canvas>
<audio id="music" loop>
  <source src="flores.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const audio = document.getElementById("music");
const textContainer = document.getElementById("textContainer");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

// ===== Fondo estrellado =====
let stars = [];
for(let i=0;i<250;i++){
  stars.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: Math.random()*1.5,
    s: Math.random()*0.5 + 0.2
  });
}

// ===== Texto animado letra por letra =====
const message = "Porque Se Que Las Amas Gerberas Amarillas";
let index = 0;
function typeWriter(){
  if(index <= message.length){
    textContainer.innerHTML = message.slice(0,index);
    index++;
    setTimeout(typeWriter, 100);
  }
}
typeWriter();

// ===== Gerberas =====
class Flower {
  constructor(offsetX, tallOffset, size, curvature){
    this.offsetX = offsetX; 
    this.tallOffset = tallOffset; 
    this.size = size;
    this.curvature = curvature;
    this.angle = Math.random()*Math.PI*2;
    this.centerRadius = this.size*0.18; 
    this.centerX = 0;
    this.centerY = 0;
  }

  draw(originX, originY, swayX){
    ctx.save();
    let sway = Math.sin(this.angle)*15 + swayX; 
    ctx.translate(originX + this.offsetX + sway, originY - this.tallOffset);
    ctx.rotate(Math.sin(this.angle)*0.04); 

    // ===== Tallo =====
    let tallHeight = this.tallOffset + 180;
    ctx.strokeStyle = '#2e7d32';
    ctx.lineWidth = this.size*0.12; 
    ctx.shadowColor = "rgba(50,220,50,0.8)"; 
    ctx.shadowBlur = 12;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.bezierCurveTo(-this.size*0.06*this.curvature,tallHeight*0.2,this.size*0.06*this.curvature,tallHeight*0.6,0,tallHeight);
    ctx.stroke();

    // ===== Pétalos =====
    for(let i=0;i<16;i++){
      ctx.save();
      ctx.rotate(i * Math.PI/8);
      let grd = ctx.createRadialGradient(0,0,this.size*0.07,0,0,this.size*0.4);
      grd.addColorStop(0,'#FFFF99');
      grd.addColorStop(0.5,'#FFD700');
      grd.addColorStop(1,'#FFA500');
      ctx.fillStyle = grd;
      ctx.shadowColor = "rgba(255,255,200,0.6)";
      ctx.shadowBlur = 12;
      ctx.beginPath();
      ctx.ellipse(0,-this.size*0.35,this.size*0.18,this.size*0.4,0,0,Math.PI*2);
      ctx.fill();

      ctx.strokeStyle = "rgba(200,150,0,0.6)";
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(0,-this.size*0.35);
      ctx.stroke();

      ctx.restore();
    }

    // ===== Centro (ombligo) =====
    ctx.fillStyle = '#4B2E1E';
    ctx.shadowColor = "rgba(255,255,200,0.6)";
    ctx.shadowBlur = 14;
    ctx.beginPath();
    ctx.arc(0,0,this.centerRadius,0,Math.PI*2);
    ctx.fill();

    this.centerX = originX + this.offsetX + sway;
    this.centerY = originY - this.tallOffset;

    ctx.restore();
    this.angle += 0.015;
  }

  isClicked(mouseX, mouseY){
    const dx = mouseX - this.centerX;
    const dy = mouseY - this.centerY;
    return Math.sqrt(dx*dx + dy*dy) <= this.centerRadius;
  }
}

// ===== Punto de unión de tallos (línea imaginaria abajo) =====
let originX = canvas.width/2;
let originY = canvas.height*0.6; // línea imaginaria más abajo

// ===== Crear ramo 7 flores, 3 arriba, 4 abajo =====
let flowers = [
  // 3 flores altas arriba
  new Flower(-140, 220, 100, 1.5),
  new Flower(0, 250, 100, 0.8),
  new Flower(140, 220, 100, 1.2),

  // 4 flores abajo
  new Flower(-180, 120, 90, 1.0),
  new Flower(-60, 140, 90, 1.3),
  new Flower(60, 140, 90, 0.9),
  new Flower(180, 120, 90, 1.1)
];

// ===== Animación =====
let swayX = 0;
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // dibujar estrellas
  ctx.fillStyle='white';
  stars.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
    s.y += s.s;
    if(s.y>canvas.height){ 
      s.y=0;
      s.x=Math.random()*canvas.width;
    }
  });

  // dibujar flores
  flowers.forEach(f => f.draw(originX, originY, swayX));

  swayX = Math.sin(Date.now()/1500)*12;

  requestAnimationFrame(animate);
}
animate();

// ===== Activar música al tocar los ombligos =====
canvas.addEventListener('click', function(e){
  const rect = canvas.getBoundingClientRect();
  const mouseX = e.clientX - rect.left;
  const mouseY = e.clientY - rect.top;

  flowers.forEach(f => {
    if(f.isClicked(mouseX, mouseY)){
      audio.play();
    }
  });
});
</script>
</body>
</html>